<?xml version="1.0" encoding="utf-8" ?> 

<configuration>

    <configSections>
        <section name="rails"
                 type="Castle.CastleOnRails.Engine.Configuration.RailsSectionHandler, Castle.CastleOnRails.Engine" />

        <section name="castle"
                 type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor" />
    </configSections>

    <rails>
        <!-- If you'd like to use the controller directly: -->
		<!-- <controllers assembly="Castle.Applications.PestControl.Web" /> -->
		<views path="views" />
        <!--  -->
        <customControllerFactory 
			type="Castle.CastleOnRails.Engine.WindsorExtension.WindsorControllerFactory, Castle.CastleOnRails.Engine.WindsorExtension" />
    </rails>

	<castle>
		<facilities>

			<facility id="prevalence">
				<engines>
					<engine 
						id="prevalenceengine"
						autoVersionMigration="false" 
						storageDir="storage" 
						systemId="pestcontrolModel" 
						systemType="Castle.Applications.PestControl.Model.PestControlModel, Castle.Applications.PestControl" />
				</engines>
			</facility>

		</facilities>
		
		<components>

		</components>

	</castle>

    <system.web>
        <httpHandlers>
            <add verb="*" path="*.rails" 
               type="Castle.CastleOnRails.Engine.RailsHttpHandlerFactory, Castle.CastleOnRails.Engine" />
        </httpHandlers>
        
        <authentication mode="Forms">
          <forms name="auth" loginUrl="/home/index.rails" />
        </authentication>

    </system.web>

	<location path="project">
		<system.web>
			<authorization>
				<deny users="?"/>
			</authorization>
		</system.web>
	</location>

</configuration>
