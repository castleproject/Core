
First test : spacing between stuff.  Note that spacing preceeding the directives counts!
One blank line follows

    this should be followed by two blank lines


    this is the if statement. (followed by two blank lines)

        
        this is great (followed by a blank line, 4 spaces on a line,and 2 more, yes there should be one after the 4 spaces)

    

-- Second Test : no spacing between anything (1 blank line follows)

    this
    this is the if statement.
            this is great (line w/ 4 spaces follows (from in front of the #end) + another blank line)
    
------------
True
-----------

-- Third Test : tight tight tight.  Note that #end eats the \n, which is NOT what people expect, I think.
-- one blank line follows

blargh This follows blarghblarghThis immedately follows blargh with a following newline

-- Fourth Test : another tight tight tight. If you want the \n, then put one *after* the content, not a space after #end.
-- one blank line follows

blargh This follows blargh
blarghThis immedately follows blargh with a following newline

-- Fifth Test : different kind of tight. blank line follows

blargh
blargh2
blargh3
